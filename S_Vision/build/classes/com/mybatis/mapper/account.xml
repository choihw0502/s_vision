<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="accountMapper">
	<select id="accountList" parameterType="com.vo.AccountVO" resultType="map">
		select acc_num, acc_bank, acc_name, acc_blance from account where mem_id = #{mem_id}
	</select>
	<insert id="proc_accountAdd" parameterType="map" statementType="CALLABLE">
		{call proc_accountAdd(#{P_MEM_ID,mode=IN,jdbcType=VARCHAR,javaType=java.lang.String}
						 ,#{P_ACC_NAME,mode=IN,jdbcType=VARCHAR,javaType=java.lang.String}
						 ,#{P_ACC_BANK,mode=IN,jdbcType=VARCHAR,javaType=java.lang.String}
						 ,#{P_ACC_NUM,mode=IN,jdbcType=VARCHAR,javaType=java.lang.String}
						 ,#{RESULT,mode=OUT,jdbcType=INTEGER,javaType=java.lang.Integer}
						)}
	</insert>
	<select id="accountList2" parameterType="com.vo.AccountVO" resultType="map">
	select ah.acc_balance, ah.acc_num, a.acc_bank, a.acc_name, ah.acc_date from acc_history2 ah, account a where ah.acc_rownum in (select max(acc_rownum) from acc_history2 group by acc_num) and ah.acc_num in(select acc_num from account where mem_id=#{mem_id}) and ah.acc_num = a.acc_num 
	order by ah.acc_balance desc
	</select>
	

</mapper>
